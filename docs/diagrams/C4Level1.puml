@startuml C4Level1
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_TOP_DOWN()
SHOW_PERSON_OUTLINE()

title CourtierPro â€” System Context (C4 Level 1)

Person(client, "Client (Buyer / Seller)", "A client working with the brokerage to buy or sell a property. Views transaction progress, uploads/downloads documents, requests appointments.")
Person(broker, "Broker", "Licensed real estate broker in Quebec. Manages client transactions, updates stages, reviews documents, schedules appointments, and views analytics.")
Person(admin, "Admin", "System administrator who manages platform access, organization settings, audit logs, and system configuration.")

System(courtierPro, "CourtierPro", "Bilingual (EN/FR) broker-client management platform for Quebec real estate brokerages. Provides transaction lifecycle tracking, document management (request/upload/review/sign workflows), appointment scheduling, notifications, and broker analytics dashboard.")

System_Ext(auth0, "Auth0", "Cloud identity provider for OAuth2/OIDC authentication, MFA, and role-based access control (ADMIN, BROKER, CLIENT).")
System_Ext(cloudflareR2, "Cloudflare R2", "S3-compatible object storage for client-submitted documents, broker-provided files, offer attachments, and other transaction-related artifacts.")
System_Ext(amazonSES, "AWS SES", "Email delivery service for transactional notifications: document requests, stage updates, appointment confirmations, reminders, and broadcast messages.")

client --> courtierPro : "Views transaction status, uploads/downloads documents, requests/confirms appointments, receives notifications"
broker --> courtierPro : "Manages transactions, reviews documents, schedules appointments, views analytics dashboard, sends reminders"
admin --> courtierPro : "Manages user access, configures organization settings, views audit logs, sends broadcast notifications"

courtierPro --> auth0     : "Delegates authentication and enforces role-based access via JWT"
courtierPro --> cloudflareR2  : "Stores and retrieves documents via pre-signed URLs (S3-compatible API)"
courtierPro --> amazonSES : "Sends transactional emails (document requests, stage updates, appointment confirmations, reminders)"

skinparam nodesep 80
skinparam ranksep 150
@enduml
