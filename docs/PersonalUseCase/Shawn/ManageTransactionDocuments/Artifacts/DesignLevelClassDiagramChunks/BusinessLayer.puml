    @startuml BusinessLayer
    skinparam classAttributeIconSize 0

    title Business Layer

    package "Business Layer" #LightGreen {
    interface DocumentService {
        + getDocumentsForTransaction(transactionId, userId): List<DocumentResponseDTO>
        + getDocument(documentId, userId): DocumentResponseDTO
        + createDocument(transactionId, dto): DocumentResponseDTO
        + updateDocument(documentId, dto): DocumentResponseDTO
        + deleteDocument(documentId): void
        + submitDocument(transactionId, documentId, file, userId, type): DocumentResponseDTO
        + getAllDocumentsForUser(userId): List<DocumentResponseDTO>
        + getDocumentDownloadUrl(documentId, versionId, userId): String
        + reviewDocument(transactionId, documentId, dto, brokerId): DocumentResponseDTO
    }
    
    class DocumentServiceImpl {
        - documentRepository: DocumentRepository
        - transactionRepository: TransactionRepository
        - userAccountRepository: UserAccountRepository
        - notificationService: NotificationService
        - objectStorageService: ObjectStorageService
        --
        + getDocumentsForTransaction(transactionId, userId): List<DocumentResponseDTO>
        + createDocument(transactionId, dto): DocumentResponseDTO
        + submitDocument(transactionId, documentId, file, userId, type): DocumentResponseDTO
        + reviewDocument(transactionId, documentId, dto, brokerId): DocumentResponseDTO
        - validateFile(file): void
        - validateCanSubmit(document): void
        - validateCanReview(document): void
        - mapToDTO(entity): DocumentResponseDTO
    }
    
    interface NotificationService {
        + sendDocumentRequestNotification(document): void
        + sendDocumentSubmittedNotification(document): void
        + sendDocumentReviewedNotification(document, decision): void
    }
    
    ' Intra-package relationships
    DocumentServiceImpl ..|> DocumentService : implements
    }

    @enduml
