@startuml InfrastructureLayer
skinparam classAttributeIconSize 0

title Infrastructure Layer

package "Infrastructure Layer" #LightCoral {
  interface S3StorageService {
    + uploadFile(transactionId, documentId, file): StorageObject
    + getPreSignedUrl(s3Key, expirationMinutes): String
    + deleteFile(s3Key): void
  }
  
  class S3StorageServiceImpl {
    - s3Client: S3Client  // Connects to Cloudflare R2 (S3-compatible)
    - bucketName: String
    --
    + uploadFile(transactionId, documentId, file): StorageObject
    + getPreSignedUrl(s3Key, expirationMinutes): String
    - generateS3Key(transactionId, documentId, fileName): String
  }
  
  ' Intra-package relationships
  S3StorageServiceImpl ..|> S3StorageService : implements
}

@enduml
