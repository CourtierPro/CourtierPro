@startuml PresentationLayer
skinparam classAttributeIconSize 0

title Presentation Layer

package "Presentation Layer" #LightBlue {
  class DocumentController {
    - service: DocumentService
    --
    + getDocuments(transactionId, userId): List<DocumentResponseDTO>
    + createDocument(transactionId, dto): DocumentResponseDTO
    + getDocument(transactionId, documentId, userId): DocumentResponseDTO
    + updateDocument(transactionId, documentId, dto): DocumentResponseDTO
    + deleteDocument(transactionId, documentId): void
    + submitDocument(transactionId, documentId, file, userId, type): DocumentResponseDTO
    + getDocumentDownloadUrl(transactionId, documentId, versionId): Map<String, String>
    + reviewDocument(transactionId, documentId, reviewDto, brokerId): DocumentResponseDTO
  }
  
  class GlobalDocumentController {
    - service: DocumentService
    --
    + getDocumentById(documentId, userId): Map<String, String>
  }
  
  class DocumentRequestDTO {
    + docType: DocumentTypeEnum
    + customTitle: String
    + expectedFrom: DocumentPartyEnum
    + relatedBuyerStage: BuyerStage
    + relatedSellerStage: SellerStage
    + stage: StageEnum
    + brokerNotes: String
    + visibleToClient: Boolean
    + linkedConditionIds: List<UUID>
  }
  
  class DocumentResponseDTO {
    + documentId: UUID
    + transactionId: UUID
    + docType: DocumentTypeEnum
    + customTitle: String
    + status: DocumentStatusEnum
    + expectedFrom: DocumentPartyEnum
    + stage: StageEnum
    + brokerNotes: String
    + visibleToClient: Boolean
    + versions: List<DocumentVersionDTO>
    + lastUpdatedAt: LocalDateTime
  }
  
  class DocumentReviewRequestDTO {
    + decision: DocumentStatusEnum
    + brokerNotes: String
  }
  
  class DocumentVersionDTO {
    + versionId: UUID
    + fileName: String
    + mimeType: String
    + uploadedAt: LocalDateTime
    + uploadedByParty: DocumentPartyEnum
    + uploadedByName: String
  }
  
  ' Intra-package relationships
  DocumentController ..> DocumentRequestDTO : receives
  DocumentController ..> DocumentResponseDTO : returns
  DocumentController ..> DocumentReviewRequestDTO : receives
  DocumentResponseDTO ..> DocumentVersionDTO : contains
}

@enduml
